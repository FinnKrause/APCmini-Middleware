<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>APCmini Middleware ©Finn Krause</title>
  <link rel="stylesheet" href="CSSReset.css" />
  <link rel="stylesheet" href="CSSVARS.css" />
  <link rel="stylesheet" href="LiquidGlass.css" />
  <link rel="stylesheet" href="Pult/Pult.css" />
  <link rel="stylesheet" href="index.css" />
</head>

<script src="../node_modules/html2canvas/dist/html2canvas.min.js"></script>
<script type="module" src="./FrontEndMain.js" defer></script>

<!--  
 TODO: Redundant settings that are saved somewhere. Auto-loading of last used files 
 -->

<body>
  <div id="bottomPart" class="bottomPart">

    <div id="Pult" style="display: none;">
      <svg id="lock-closed" class="Lock" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
        fill="none" viewBox="0 0 24 24">
        <path stroke="darkred" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 14v3m-3-6V7a3 3 0 1 1 6 0v4m-8 0h10a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1Z" />
      </svg>

      <svg id="lock-open" class="Lock" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
        fill="none" viewBox="0 0 24 24">
        <path stroke="var(--fontColor)" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M10 14v3m4-6V7a3 3 0 1 1 6 0v4M5 11h10a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1Z" />
      </svg>

      <div class="ConsoleTopRightControls">
        <img id="MTG-Logo" src="./assets/KrauseLogo.png" alt="MTG-Logo">
        <!-- <h1>Finn Krause Software Solutions</h1> -->
      </div>

      <div id="PultSVG" class="liquid-glass">

        <div id="PultTop">
          <div id="PultMatrix" aria-label="button grid (8x8)">
            <!-- Row 1 (top) -->
            <div id="Button56" class="btn-rect">56</div>
            <div id="Button57" class="btn-rect">57</div>
            <div id="Button58" class="btn-rect">58</div>
            <div id="Button59" class="btn-rect">59</div>
            <div id="Button60" class="btn-rect">60</div>
            <div id="Button61" class="btn-rect">61</div>
            <div id="Button62" class="btn-rect">62</div>
            <div id="Button63" class="btn-rect">63</div>

            <!-- Row 2 -->
            <div id="Button48" class="btn-rect">48</div>
            <div id="Button49" class="btn-rect">49</div>
            <div id="Button50" class="btn-rect">50</div>
            <div id="Button51" class="btn-rect">51</div>
            <div id="Button52" class="btn-rect">52</div>
            <div id="Button53" class="btn-rect">53</div>
            <div id="Button54" class="btn-rect">54</div>
            <div id="Button55" class="btn-rect">55</div>

            <!-- Row 3 -->
            <div id="Button40" class="btn-rect">40</div>
            <div id="Button41" class="btn-rect">41</div>
            <div id="Button42" class="btn-rect">42</div>
            <div id="Button43" class="btn-rect">43</div>
            <div id="Button44" class="btn-rect">44</div>
            <div id="Button45" class="btn-rect">45</div>
            <div id="Button46" class="btn-rect">46</div>
            <div id="Button47" class="btn-rect">47</div>

            <!-- Row 4 -->
            <div id="Button32" class="btn-rect">32</div>
            <div id="Button33" class="btn-rect">33</div>
            <div id="Button34" class="btn-rect">34</div>
            <div id="Button35" class="btn-rect">35</div>
            <div id="Button36" class="btn-rect">36</div>
            <div id="Button37" class="btn-rect">37</div>
            <div id="Button38" class="btn-rect">38</div>
            <div id="Button39" class="btn-rect">39</div>

            <!-- Row 5 -->
            <div id="Button24" class="btn-rect">24</div>
            <div id="Button25" class="btn-rect">25</div>
            <div id="Button26" class="btn-rect">26</div>
            <div id="Button27" class="btn-rect">27</div>
            <div id="Button28" class="btn-rect">28</div>
            <div id="Button29" class="btn-rect">29</div>
            <div id="Button30" class="btn-rect">30</div>
            <div id="Button31" class="btn-rect">31</div>

            <!-- Row 6 -->
            <div id="Button16" class="btn-rect">16</div>
            <div id="Button17" class="btn-rect">17</div>
            <div id="Button18" class="btn-rect">18</div>
            <div id="Button19" class="btn-rect">19</div>
            <div id="Button20" class="btn-rect">20</div>
            <div id="Button21" class="btn-rect">21</div>
            <div id="Button22" class="btn-rect">22</div>
            <div id="Button23" class="btn-rect">23</div>

            <!-- Row 7 -->
            <div id="Button8" class="btn-rect">8</div>
            <div id="Button9" class="btn-rect">9</div>
            <div id="Button10" class="btn-rect">10</div>
            <div id="Button11" class="btn-rect">11</div>
            <div id="Button12" class="btn-rect">12</div>
            <div id="Button13" class="btn-rect">13</div>
            <div id="Button14" class="btn-rect">14</div>
            <div id="Button15" class="btn-rect">15</div>

            <!-- Row 8 (bottom) -->
            <div id="Button0" class="btn-rect">0</div>
            <div id="Button1" class="btn-rect">1</div>
            <div id="Button2" class="btn-rect">2</div>
            <div id="Button3" class="btn-rect">3</div>
            <div id="Button4" class="btn-rect">4</div>
            <div id="Button5" class="btn-rect">5</div>
            <div id="Button6" class="btn-rect">6</div>
            <div id="Button7" class="btn-rect">7</div>
          </div>

          <div id="PultSoftKeys">
            <div id="Button112" class="btn-round softkey">112</div>
            <div id="Button113" class="btn-round softkey">113</div>
            <div id="Button114" class="btn-round softkey">114</div>
            <div id="Button115" class="btn-round softkey">115</div>
            <div id="Button116" class="btn-round softkey">116</div>
            <div id="Button117" class="btn-round softkey">117</div>
            <div id="Button118" class="btn-round softkey">118</div>
            <div id="Button119" class="btn-round softkey">119</div>
          </div>
        </div>

        <div id="PultBottom">
          <!-- 2) small round buttons row directly above faders -->
          <div id="PultFaderButtons">
            <div id="Button100" class="btn-round faderkey">100</div>
            <div id="Button101" class="btn-round faderkey">101</div>
            <div id="Button102" class="btn-round faderkey">102</div>
            <div id="Button103" class="btn-round faderkey">103</div>
            <div id="Button104" class="btn-round faderkey">104</div>
            <div id="Button105" class="btn-round faderkey">105</div>
            <div id="Button106" class="btn-round faderkey">106</div>
            <div id="Button107" class="btn-round faderkey">107</div>
            <div id="Button108" class="btn-round faderkey">107</div>
          </div>

          <!-- 3) Faders row (nine faders as in SVG: Fader48..Fader56) -->
          <div class="fader-row" role="group" aria-label="faders">
            <!-- Fader 48 (left-most) -->
            <div class="fader" aria-hidden="false">
              <div class="fader-slot" aria-hidden="true"></div>
              <div id="Fader48" class="fader-knob" aria-label="Fader48">
                <div class="knob" aria-hidden="true"></div>
                <div class="knob-line" aria-hidden="true"></div>
              </div>
            </div>

            <div class="fader">
              <div class="fader-slot"></div>
              <div id="Fader49" class="fader-knob">
                <div class="knob"></div>
                <div class="knob-line"></div>
              </div>
            </div>

            <div class="fader">
              <div class="fader-slot"></div>
              <div id="Fader50" class="fader-knob">
                <div class="knob"></div>
                <div class="knob-line"></div>
              </div>
            </div>

            <div class="fader">
              <div class="fader-slot"></div>
              <div id="Fader51" class="fader-knob">
                <div class="knob"></div>
                <div class="knob-line"></div>
              </div>
            </div>

            <div class="fader">
              <div class="fader-slot"></div>
              <div id="Fader52" class="fader-knob">
                <div class="knob"></div>
                <div class="knob-line"></div>
              </div>
            </div>

            <div class="fader">
              <div class="fader-slot"></div>
              <div id="Fader53" class="fader-knob">
                <div class="knob"></div>
                <div class="knob-line"></div>
              </div>
            </div>

            <div class="fader">
              <div class="fader-slot"></div>
              <div id="Fader54" class="fader-knob">
                <div class="knob"></div>
                <div class="knob-line"></div>
              </div>
            </div>

            <div class="fader">
              <div class="fader-slot"></div>
              <div id="Fader55" class="fader-knob">
                <div class="knob"></div>
                <div class="knob-line"></div>
              </div>
            </div>

            <div class="fader">
              <div class="fader-slot"></div>
              <div id="Fader56" class="fader-knob">
                <div class="knob"></div>
                <div class="knob-line"></div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="SettingsSection" id="PrestartSettings">
      <h2 class="header">MIDI-Settings</h2>
      <div class="flexWrapper midirows">
        <div class="dropdown">
          <h4>MIDI Gerät Input:</h4>
          <select class="dropdownelement" id="dropdown1">
            <option value="Bitte wählen"></option>
          </select>
        </div>
        <div class="dropdown">
          <h4>MIDI Gerät Output:</h4>
          <select class="dropdownelement" id="dropdown2">
            <option value="Bitte wählen"></option>
          </select>
        </div>
      </div>
      <div class="flexWrapper midirows">
        <div class="dropdown">
          <h4>Joker Input</h4>
          <select class="dropdownelement" id="dropdown3">
            <option value="Bitte wählen"></option>

          </select>
        </div>
        <div class="dropdown">
          <h4>Joker Output</h4>
          <select class="dropdownelement" id="dropdown4">
            <option value="Bitte wählen"></option>
          </select>
        </div>
      </div>

      <div id="midiButtons" class="flexWrapper midiButtons">
        <button class="ConfigButton" id="reloadButton">Reload</button>
        <button class="ConfigButton" id="connectButton">Connect</button>
        <button class="ConfigButton" id="DemoButton">Demo (BETA)</button>
      </div>
    </div>

    <div id="Settings" style="display: none;">

      <div class="SettingsSection">
        <h2 class="header">Actions</h2>
        <div class="flexWrapper actionbuttons">
          <button class="ConfigButton" id="NewEmptyProjectButton" disabled>Create new empty project</button>
          <button class="ConfigButton" id="DiscardChangesButton" disabled>Discard all changes</button>
        </div>
      </div>

      <div class="SettingsSection" id="MidiSettings" style="display: none;">
        <h2 class="header">MIDI-Settings</h2>
        <div class="flexWrapper midirows">
          <div class="dropdown">
            <h4>MIDI Gerät Input:</h4>
            <select class="dropdownelement" id="dropdown1">
              <option value="Bitte wählen"></option>
            </select>
          </div>
          <div class="dropdown">
            <h4>MIDI Gerät Output:</h4>
            <select class="dropdownelement" id="dropdown2">
              <option value="Bitte wählen"></option>
            </select>
          </div>
        </div>
        <div class="flexWrapper midirows">
          <div class="dropdown">
            <h4>Joker Input</h4>
            <select class="dropdownelement" id="dropdown3">
              <option value="Bitte wählen"></option>

            </select>
          </div>
          <div class="dropdown">
            <h4>Joker Output</h4>
            <select class="dropdownelement" id="dropdown4">
              <option value="Bitte wählen"></option>
            </select>
          </div>
        </div>

        <div id="midiButtons" class="flexWrapper midiButtons">
          <button class="ConfigButton" id="reloadButton">Reload</button>
          <button class="ConfigButton" id="connectButton">Connect</button>
        </div>
      </div>

      <div class="SettingsSection LookImportExportSettings">
        <h2 class="header">Configs</h2>

        <div class="flexWrapper ConfigRow">
          <div class="flexWrapper horizontal">
            <h4>Save current config:</h4>
            <div class="flexWrapper saveButtons">
              <button class="ConfigButton" id="saveButton" disabled>Save</button>
              <button class="ConfigButton" id="saveConfigButton">Save as</button>
            </div>
          </div>
          <div class="flexWrapper horizontal">
            <h4>Load config file:</h4>
            <button class="ConfigButton" id="loadConfigButton">Open file</button>
          </div>
        </div>

        <h5 id="LoadedConfigName"></h5>
      </div>

      <div class="SettingsSection EditLook" id="EditLookSection">
        <h2 class="header">Edit config</h2>
        <div class="selectedCellsContainer"></div>


        <div class="flexWrapper editStateFlex">
          <div class="looksWrapper editStateFlexChild">
            <h4 class="onlook header">ON</h4>
            <div class="flexWrapper horizontal maincore">
              <div class="flexWrapper">
                <!-- <h5>Farbe</h5> -->
                <input id="oncolor" class="ColorPicker" type="color" disabled>
              </div>
              <div class="flexWrapper horizontal lightModeRow">
                <!-- <h5>Light Mode:</h5> -->
                <select class="dropdownelement" id="onMode" disabled>
                  <option value="0">Brightness10</option>
                  <option value="1">Brightness25</option>
                  <option value="2">Brightness50</option>
                  <option value="3">Brightness65</option>
                  <option value="4">Brightness75</option>
                  <option value="5">Brightness90</option>
                  <option value="6">Brightness100</option>
                  <option value="7">Pulsing1t16</option>
                  <option value="8">Pulsing1t8</option>
                  <option value="9">Pulsing1t4</option>
                  <option value="10">Pulsing1t2</option>
                  <option value="11">Blinking1t24</option>
                  <option value="12">Blinking1t16</option>
                  <option value="13">Blinking1t8</option>
                  <option value="14">Blinking1t4</option>
                  <option value="15">Blinking1t2</option>
                </select>

              </div>
            </div>

          </div>

          <div class="looksWrapper editStateFlex editStateFlexChild">
            <h4 class="offlook header">OFF</h4>
            <div class="flexWrapper horizontal maincore">

              <div class="flexWrapper">
                <!-- <h5>Farbe</h5> -->
                <input id="offcolor" class="ColorPicker" disabled type="color">
              </div>

              <div class="flexWrapper horizontal lightModeRow">
                <!-- <h5>Light Mode:</h5> -->
                <select class="dropdownelement" id="offMode" disabled>
                  <option value="0">Brightness10</option>
                  <option value="1">Brightness25</option>
                  <option value="2">Brightness50</option>
                  <option value="3">Brightness65</option>
                  <option value="4">Brightness75</option>
                  <option value="5">Brightness90</option>
                  <option value="6">Brightness100</option>
                  <option value="7">Pulsing1t16</option>
                  <option value="8">Pulsing1t8</option>
                  <option value="9">Pulsing1t4</option>
                  <option value="10">Pulsing1t2</option>
                  <option value="11">Blinking1t24</option>
                  <option value="12">Blinking1t16</option>
                  <option value="13">Blinking1t8</option>
                  <option value="14">Blinking1t4</option>
                  <option value="15">Blinking1t2</option>
                </select>
              </div>

            </div>

          </div>

        </div>
        <div class="ButtonLabelSection">
          <input id="ButtonLabelInput" class="ButtonLabelInput" placeholder="Button Label" type="text" disabled>
          <div class="LabelOverwriteWarningSection">
            <h5 class="LabelOverwriteWarning">Overwrite existing<br>labels for all selected</h5>
            <input type="checkbox" id="OverwriteLabelCheckbox" disabled>
          </div>
        </div>
        <button id="UpdateEditButton" class="UpdateButton" disabled>Update</button>


      </div>

      <!-- Edit Lock Status For Config -->
      <div class="SettingsSection EditLockedStatus" id="EditLockedSection" style="display: none;">
        <h2 class="header">Edit lock status</h2>
        <div class="flexWrapper editStateFlex">
          <div class="looksWrapper editStateFlexChild">
            <h4 class="onlook header">FOREGROUND</h4>
            <div class="flexWrapper horizontal maincore">
              <div class="flexWrapper">
                <input id="foregroundcolor" class="ColorPicker" type="color" >
              </div>
              <div class="flexWrapper horizontal lightModeRow">
                <select class="dropdownelement" id="foregroundMode" >
                  <option value="0">Brightness10</option>
                  <option value="1">Brightness25</option>
                  <option value="2">Brightness50</option>
                  <option value="3">Brightness65</option>
                  <option value="4">Brightness75</option>
                  <option value="5">Brightness90</option>
                  <option value="6">Brightness100</option>
                  <option value="7">Pulsing1t16</option>
                  <option value="8">Pulsing1t8</option>
                  <option value="9">Pulsing1t4</option>
                  <option value="10">Pulsing1t2</option>
                  <option value="11">Blinking1t24</option>
                  <option value="12">Blinking1t16</option>
                  <option value="13">Blinking1t8</option>
                  <option value="14">Blinking1t4</option>
                  <option value="15">Blinking1t2</option>
                </select>

              </div>
            </div>

          </div>

          <div class="looksWrapper editStateFlex editStateFlexChild">
            <h4 class="offlook header">BACKGROUND</h4>
            <div class="flexWrapper horizontal maincore">

              <div class="flexWrapper">
                <input id="backgroundcolor" class="ColorPicker" type="color">
              </div>

              <div class="flexWrapper horizontal lightModeRow">
                <select class="dropdownelement" id="backgroundMode">
                  <option value="0">Brightness10</option>
                  <option value="1">Brightness25</option>
                  <option value="2">Brightness50</option>
                  <option value="3">Brightness65</option>
                  <option value="4">Brightness75</option>
                  <option value="5">Brightness90</option>
                  <option value="6">Brightness100</option>
                  <option value="7">Pulsing1t16</option>
                  <option value="8">Pulsing1t8</option>
                  <option value="9">Pulsing1t4</option>
                  <option value="10">Pulsing1t2</option>
                  <option value="11">Blinking1t24</option>
                  <option value="12">Blinking1t16</option>
                  <option value="13">Blinking1t8</option>
                  <option value="14">Blinking1t4</option>
                  <option value="15">Blinking1t2</option>
                </select>
              </div>

            </div>

          </div>

        </div>
        <div class="PasswordSection">
          <h5 class="LabelPassword">Password</h5>
          <div class="selectedCellsContainer selectedCellsContainerPAssword"></div>
        </div>
        <div class="ButtonLabelSection">
          <input id="AnimationTextInput" class="ButtonLabelInput" placeholder="Text" type="text">
          <div class="LabelOverwriteWarningSection">
            <h5 class="LabelOverwriteWarning">Speed</h5>
            <input type="number" class="ButtonLabelInput" id="AnimationSpeedInput" value="200">
          </div>
        </div>
        <button id="UpdateLockStatusButton" class="UpdateButton">Update</button>


      </div>
      

      <!-- <div class="SettingsSection">
        <h2 class="header">Lock config</h2>
        <div class="flexWrapper actionbuttons">
          <h5 style="padding: 20px; color: rgb(95, 0, 0)">Coming soon</h5>
        </div>
      </div> -->

    </div>
  </div>
</body>

</html>